<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å•†å“åˆ†æœŸç”³è«‹å¹³å° (æ­£å¼ç‡Ÿé‹ç‰ˆ)</title>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <style>
        body { font-family: -apple-system, "Microsoft JhengHei", sans-serif; background-color: #f0f2f5; margin: 0; padding: 15px; color: #333; }
        .container { max-width: 100%; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        h2 { color: #004a87; text-align: center; margin-bottom: 5px; }
        p.subtitle { text-align: center; font-size: 13px; color: #666; margin-bottom: 25px; }
        .section-title { background: #eef2f3; padding: 10px 15px; font-weight: bold; margin-top: 25px; border-left: 5px solid #28a745; border-radius: 4px; color: #2c3e50; }
        .form-group { margin-top: 15px; }
        label { display: block; font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #555; }
        label span { color: red; margin-left: 4px; }
        input, select { width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 8px; box-sizing: border-box; font-size: 16px; outline: none; }
        input:focus { border-color: #28a745; }
        .upload-area { border: 2px dashed #28a745; padding: 20px; text-align: center; border-radius: 10px; margin-top: 10px; cursor: pointer; background: #f9fffb; }
        .preview-img { width: 100%; margin-top: 15px; border-radius: 10px; display: none; border: 1px solid #ddd; }
        .submit-btn { background: #28a745; color: white; width: 100%; padding: 18px; border: none; border-radius: 10px; font-size: 18px; font-weight: bold; margin-top: 40px; cursor: pointer; width: 100%; box-shadow: 0 4px 10px rgba(40,167,69,0.3); }
        .submit-btn:active { background: #218838; }
    </style>
</head>
<body>

<div class="container">
    <h2>åˆ†æœŸç”³è«‹è¡¨å–®</h2>
    <p class="subtitle">â€» ä»¥ä¸‹æ‰€æœ‰æ¬„ä½å‡ç‚ºå¿…å¡«ï¼Œè«‹å‹™å¿…çœŸå¯¦å¡«å¯«</p>
    
    <div class="section-title">ä¸€ã€å€‹äººåŸºæœ¬è³‡æ–™</div>
    <div class="form-group"><label>å…¨å<span>*</span></label><input type="text" id="name" data-name="å…¨å"></div>
    <div class="form-group"><label>æ‰‹æ©Ÿè™Ÿç¢¼<span>*</span></label><input type="tel" id="mobile" data-name="æ‰‹æ©Ÿè™Ÿç¢¼"></div>
    <div class="form-group"><label>å‡ºç”Ÿå¹´æœˆæ—¥<span>*</span></label><input type="text" id="birthday" data-name="å‡ºç”Ÿå¹´æœˆæ—¥" placeholder="ä¾‹ï¼š75/10/20"></div>
    <div class="form-group"><label>èº«åˆ†è­‰å­—è™Ÿ<span>*</span></label><input type="text" id="id_num" data-name="èº«åˆ†è­‰å­—è™Ÿ"></div>
    <div class="form-group"><label>æœ€é«˜å­¸æ­·<span>*</span></label>
        <select id="edu" data-name="æœ€é«˜å­¸æ­·"><option value="">è«‹é¸æ“‡</option><option>åœ‹ä¸­</option><option>é«˜ä¸­/è·</option><option>å¤§å°ˆ</option><option>å¤§å­¸ä»¥ä¸Š</option></select>
    </div>
    <div class="form-group"><label>é›»ä¿¡æ¥­è€…<span>*</span></label><input type="text" id="tel_co" data-name="é›»ä¿¡æ¥­è€…"></div>
    <div class="form-group"><label>å¸¸ç”¨ Email<span>*</span></label><input type="email" id="email" data-name="Email"></div>

    <div class="section-title">äºŒã€å±…ä½ç‹€æ³</div>
    <div class="form-group"><label>æˆ¶ç±åœ°å€<span>*</span></label><input type="text" id="h_addr" data-name="æˆ¶ç±åœ°å€"></div>
    <div class="form-group"><label>æˆ¶ç±é›»è©±<span>*</span></label><input type="text" id="h_tel" data-name="æˆ¶ç±é›»è©±"></div>
    <div class="form-group"><label>ç¾å±…åœ°å€<span>*</span></label><input type="text" id="c_addr" data-name="ç¾å±…åœ°å€"></div>
    <div class="form-group"><label>ç¾å±…åœ°å±…ä½æ™‚é–“<span>*</span></label><input type="text" id="live_time" data-name="å±…ä½æ™‚é–“" placeholder="ä¾‹ï¼š5å¹´"></div>
    <div class="form-group"><label>å±…ä½æŒæœ‰ç‹€æ³<span>*</span></label>
        <select id="h_type" data-name="å±…ä½æŒæœ‰ç‹€æ³"><option value="">è«‹é¸æ“‡</option><option>è‡ªæœ‰</option><option>è¦ªå‹æŒæœ‰</option><option>ç§Ÿè³ƒ</option></select>
    </div>

    <div class="section-title">ä¸‰ã€å·¥ä½œè³‡è¨Š</div>
    <div class="form-group"><label>å…¬å¸åç¨±<span>*</span></label><input type="text" id="comp" data-name="å…¬å¸åç¨±"></div>
    <div class="form-group"><label>å…¬å¸é›»è©±<span>*</span></label><input type="text" id="comp_tel" data-name="å…¬å¸é›»è©±"></div>
    <div class="form-group"><label>è·ç¨±<span>*</span></label><input type="text" id="job" data-name="è·ç¨±"></div>
    <div class="form-group"><label>æœˆæ”¶å…¥<span>*</span></label><input type="number" id="income" data-name="æœˆæ”¶å…¥"></div>
    <div class="form-group"><label>å¹´è³‡<span>*</span></label><input type="text" id="seniority" data-name="å¹´è³‡" placeholder="ä¾‹ï¼š2å¹´3å€‹æœˆ"></div>

    <div class="section-title">å››ã€è­‰ä»¶æ‹ç…§ä¸Šå‚³</div>
    <div class="form-group">
        <label>èº«åˆ†è­‰ã€æ­£é¢ã€‘<span>*</span></label>
        <div class="upload-area" onclick="document.getElementById('img_front').click()">ğŸ“· é»æ“Šæ‹æ”æ­£é¢</div>
        <input type="file" id="img_front" accept="image/*" style="display:none" onchange="handlePreview(this, 'p_front')" data-name="èº«åˆ†è­‰æ­£é¢">
        <img id="p_front" class="preview-img">
    </div>
    <div class="form-group">
        <label>èº«åˆ†è­‰ã€åé¢ã€‘<span>*</span></label>
        <div class="upload-area" onclick="document.getElementById('img_back').click()">ğŸ“· é»æ“Šæ‹æ”åé¢</div>
        <input type="file" id="img_back" accept="image/*" style="display:none" onchange="handlePreview(this, 'p_back')" data-name="èº«åˆ†è­‰åé¢">
        <img id="p_back" class="preview-img">
    </div>

    <div class="section-title">äº”ã€è¯çµ¡äººè³‡è¨Š (ä¸€)</div>
    <div class="form-group"><label>å§“å<span>*</span></label><input type="text" id="ref1_name" data-name="è¯çµ¡äºº1å§“å"></div>
    <div class="form-group"><label>é—œä¿‚<span>*</span></label><input type="text" id="ref1_rel" data-name="è¯çµ¡äºº1é—œä¿‚"></div>
    <div class="form-group"><label>é›»è©±<span>*</span></label><input type="tel" id="ref1_tel" data-name="è¯çµ¡äºº1é›»è©±"></div>

    <div class="section-title">å…­ã€è¯çµ¡äººè³‡è¨Š (äºŒ)</div>
    <div class="form-group"><label>å§“å<span>*</span></label><input type="text" id="ref2_name" data-name="è¯çµ¡äºº2å§“å"></div>
    <div class="form-group"><label>é—œä¿‚<span>*</span></label><input type="text" id="ref2_rel" data-name="è¯çµ¡äºº2é—œä¿‚"></div>
    <div class="form-group"><label>é›»è©±<span>*</span></label><input type="tel" id="ref2_tel" data-name="è¯çµ¡äºº2é›»è©±"></div>

    <button class="submit-btn" onclick="submitData()">ç¢ºèªé€å‡ºç”³è«‹</button>
</div>

<script>
    // âš  è«‹åœ¨æ­¤å¡«å…¥ä½ çš„çœŸå¯¦ LIFF ID
    const MY_LIFF_ID = "2008759894-DkxBFgJp";

    liff.init({ liffId: MY_LIFF_ID }).then(() => {
        if (!liff.isLoggedIn()) { liff.login(); }
    }).catch(err => console.error(err));

    function handlePreview(input, imgId) {
        const file = input.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = e => {
                const img = document.getElementById(imgId);
                img.src = e.target.result;
                img.style.display = 'block';
            };
            reader.readAsDataURL(file);
        }
    }

    function submitData() {
        // --- 1. è‡ªå‹•æª¢æŸ¥æ‰€æœ‰æ¬„ä½æ˜¯å¦å¡«å¯« ---
        const inputs = document.querySelectorAll('input, select');
        for (let input of inputs) {
            if (input.type === 'file') {
                if (input.files.length === 0) {
                    alert("ã€å°šæœªå®Œæˆã€‘\nè«‹å‹™å¿…ä¸Šå‚³ï¼š" + input.getAttribute('data-name'));
                    return;
                }
            } else {
                if (input.value.trim() === "") {
                    alert("ã€å°šæœªå®Œæˆã€‘\nè«‹å¡«å¯«ï¼š" + input.getAttribute('data-name'));
                    input.focus();
                    return;
                }
            }
        }

        // --- 2. å½™æ•´ã€Œè¶…ç´šå®Œæ•´ç‰ˆã€å ±å‘Šå…§å®¹ ---
        const report = `ã€ğŸ”” æ–°ä»¶ç”³è«‹å ±å‘Šã€‘\n` +
            `ğŸ‘¤ åŸºæœ¬è³‡æ–™ï¼š\n` +
            `å§“åï¼š${document.getElementById('name').value}\n` +
            `æ‰‹æ©Ÿï¼š${document.getElementById('mobile').value}\n` +
            `ç”Ÿæ—¥ï¼š${document.getElementById('birthday').value}\n` +
            `èº«åˆ†è­‰ï¼š${document.getElementById('id_num').value}\n` +
            `å­¸æ­·ï¼š${document.getElementById('edu').value}\n` +
            `é›»ä¿¡ï¼š${document.getElementById('tel_co').value}\n` +
            `Emailï¼š${document.getElementById('email').value}\n\n` +
            
            `ğŸ  å±…ä½ç‹€æ³ï¼š\n` +
            `æˆ¶ç±ï¼š${document.getElementById('h_addr').value}\n` +
            `æˆ¶æ©Ÿï¼š${document.getElementById('h_tel').value}\n` +
            `ç¾å±…ï¼š${document.getElementById('c_addr').value}\n` +
            `æ™‚é–“ï¼š${document.getElementById('live_time').value}\n` +
            `æŒæœ‰ï¼š${document.getElementById('h_type').value}\n\n` +
            
            `ğŸ’¼ å·¥ä½œè³‡è¨Šï¼š\n` +
            `å…¬å¸ï¼š${document.getElementById('comp').value}\n` +
            `å…¬é›»ï¼š${document.getElementById('comp_tel').value}\n` +
            `è·ç¨±ï¼š${document.getElementById('job').value}\n` +
            `æœˆæ”¶ï¼š${document.getElementById('income').value}\n` +
            `å¹´è³‡ï¼š${document.getElementById('seniority').value}\n\n` +
            
            `ğŸ‘¥ è¯çµ¡äºº1ï¼š\n` +
            `${document.getElementById('ref1_name').value} (${document.getElementById('ref1_rel').value})ï¼š${document.getElementById('ref1_tel').value}\n` +
            `ğŸ‘¥ è¯çµ¡äºº2ï¼š\n` +
            `${document.getElementById('ref2_name').value} (${document.getElementById('ref2_rel').value})ï¼š${document.getElementById('ref2_tel').value}\n` +
            `--------------------------\n` +
            `âœ… è­‰ä»¶æ­£åé¢å·²æ‹æ”ä¸Šå‚³`;

        // --- 3. å‚³é€è¨Šæ¯ ---
        liff.sendMessages([{ type: 'text', text: report }]).then(() => {
            alert("å®Œæ•´è³‡æ–™å·²æˆåŠŸå‚³é€ï¼");
            liff.closeWindow();
        }).catch(err => alert("å‚³é€å¤±æ•—ï¼Œè«‹ç¢ºä¿æ˜¯åœ¨ LINE App å…§é–‹å•Ÿä¸¦å·²æˆæ¬Šæ¬Šé™ã€‚"));
    }
</script>

</body>
</html>