<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å•†å“åˆ†æœŸç”³è«‹è¡¨</title>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <style>
        :root { --primary: #1a508b; --secondary: #28a745; --bg: #f4f7f9; }
        body { font-family: "PingFang TC", sans-serif; background-color: var(--bg); margin: 0; padding: 15px; }
        .container { max-width: 500px; margin: auto; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: var(--primary); margin-bottom: 20px; border-bottom: 2px solid var(--primary); padding-bottom: 10px; }
        .section-header { background: #eef2f7; color: var(--primary); padding: 10px; border-left: 5px solid var(--primary); font-weight: bold; margin-top: 25px; border-radius: 4px; }
        .form-group { margin-top: 15px; }
        label { display: block; font-size: 14px; font-weight: bold; margin-bottom: 6px; color: #444; }
        label span { color: red; margin-left: 4px; }
        input { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; font-size: 16px; }
        .submit-btn { background: var(--secondary); color: white; width: 100%; padding: 18px; border: none; border-radius: 12px; font-size: 18px; font-weight: bold; margin-top: 40px; cursor: pointer; }
        
        /* éš±è—åŸç”Ÿæª”æ¡ˆé¸å–å™¨ï¼Œæˆ‘å€‘ç”¨è‡ªå®šç¾©æŒ‰éˆ•è§¸ç™¼ */
        #photo_input { display: none; }
    </style>
</head>
<body>

<div class="container">
    <h2>å•†å“åˆ†æœŸæ­£å¼ç”³è«‹è¡¨å–®</h2>

    <div class="section-header">ä¸€ã€å€‹äººåŸºæœ¬è³‡æ–™</div>
    <div class="form-group"><label>ç”³è«‹äººå…¨å<span>*</span></label><input type="text" id="name" placeholder="ä¾‹ï¼šç‹å¤§æ˜"></div>
    <div class="form-group"><label>LINE ID<span>*</span></label><input type="text" id="line_id" placeholder="è«‹å¡«å¯« ID"></div>
    <div class="form-group"><label>å‡ºç”Ÿå¹´æœˆæ—¥<span>*</span></label><input type="text" id="birthday" placeholder="ä¾‹ï¼š75/05/20"></div>
    <div class="form-group"><label>èº«åˆ†è­‰å­—è™Ÿ<span>*</span></label><input type="text" id="id_num" placeholder="ä¾‹ï¼šA123456789"></div>
    <div class="form-group"><label>æœ€é«˜å­¸æ­·<span>*</span></label><input type="text" id="edu" placeholder="ä¾‹ï¼šå¤§å­¸"></div>
    <div class="form-group"><label>æ‰‹æ©Ÿè™Ÿç¢¼<span>*</span></label><input type="tel" id="mobile" placeholder="ä¾‹ï¼š0912345678"></div>
    <div class="form-group"><label>æ–¹ä¾¿è¯çµ¡æ™‚é–“<span>*</span></label><input type="text" id="contact_time" placeholder="ä¾‹ï¼š18:00éå¾Œ"></div>
    <div class="form-group"><label>é›»ä¿¡æ¥­è€…<span>*</span></label><input type="text" id="telecom" placeholder="ä¾‹ï¼šä¸­è¯é›»ä¿¡"></div>
    <div class="form-group"><label>å¸¸ç”¨ Email<span>*</span></label><input type="email" id="email" placeholder="ä¾‹ï¼štest@gmail.com"></div>

    <div class="section-header">äºŒã€å±…ä½èˆ‡å·¥ä½œç‹€æ³</div>
    <div class="form-group"><label>æˆ¶ç±åœ°å€<span>*</span></label><input type="text" id="h_addr"></div>
    <div class="form-group"><label>æˆ¶ç±é›»è©±<span>*</span></label><input type="text" id="h_tel"></div>
    <div class="form-group"><label>ç¾å±…åœ°å€<span>*</span></label><input type="text" id="c_addr"></div>
    <div class="form-group"><label>ç¾å±…é›»è©±<span>*</span></label><input type="text" id="c_tel"></div>
    <div class="form-group"><label>å±…ä½ç‹€æ³<span>*</span></label><input type="text" id="live_status" placeholder="ä¾‹ï¼š5å¹´ / è‡ªæœ‰"></div>
    <div class="form-group"><label>å…¬å¸åç¨±<span>*</span></label><input type="text" id="comp_name"></div>
    <div class="form-group"><label>å…¬å¸é›»è©±<span>*</span></label><input type="text" id="comp_tel"></div>
    <div class="form-group"><label>å…¬å¸åœ°å€<span>*</span></label><input type="text" id="comp_addr"></div>
    <div class="form-group"><label>è·ç¨±<span>*</span></label><input type="text" id="job_title"></div>
    <div class="form-group"><label>æœˆæ”¶å…¥èˆ‡å¹´è³‡<span>*</span></label><input type="text" id="income_status" placeholder="ä¾‹ï¼š4è¬ / 2å¹´"></div>
    <div class="form-group"><label>æœ‰ç„¡å‹ä¿è–ªè½‰<span>*</span></label><input type="text" id="insurance"></div>

    <div class="section-header">ä¸‰ã€è¯çµ¡äººè³‡è¨Š (äºŒä½)</div>
    <div class="form-group"><label>è¯çµ¡1å§“å/é—œä¿‚<span>*</span></label><input type="text" id="r1_name" placeholder="ä¾‹ï¼šç‹å°æ˜ / çˆ¶å­"></div>
    <div class="form-group"><label>è¯çµ¡1é›»è©±/ç…§æœƒ<span>*</span></label><input type="text" id="r1_tel" placeholder="ä¾‹ï¼š0988... / ä¿å¯†"></div>
    <div class="form-group"><label>è¯çµ¡2å§“å/é—œä¿‚<span>*</span></label><input type="text" id="r2_name" placeholder="ä¾‹ï¼šæå¤§è¯ / åŒäº‹"></div>
    <div class="form-group"><label>è¯çµ¡2é›»è©±/ç…§æœƒ<span>*</span></label><input type="text" id="r2_tel" placeholder="ä¾‹ï¼š0977... / çŸ¥æƒ…"></div>

    <input type="file" id="photo_input" accept="image/*" capture="camera">

    <button class="submit-btn" onclick="startProcess()">ç¢ºèªé€å‡ºä¸¦é–‹å•Ÿæ‹ç…§</button>
</div>

<script>
    const LIFF_ID = "2008759894-DkxBFgJp"; 
    liff.init({ liffId: LIFF_ID }).then(() => { if (!liff.isLoggedIn()) liff.login(); });

    function startProcess() {
        // 1. æª¢æŸ¥å¿…å¡«
        const fields = [
            {id:'name', n:'å…¨å'}, {id:'line_id', n:'LINE ID'}, {id:'birthday', n:'ç”Ÿæ—¥'}, {id:'id_num', n:'èº«åˆ†è­‰'}, 
            {id:'edu', n:'å­¸æ­·'}, {id:'mobile', n:'æ‰‹æ©Ÿ'}, {id:'contact_time', n:'è¯çµ¡æ™‚é–“'}, {id:'telecom', n:'é›»ä¿¡'}, 
            {id:'email', n:'Email'}, {id:'h_addr', n:'æˆ¶ç±åœ°å€'}, {id:'h_tel', n:'æˆ¶ç±é›»è©±'}, {id:'c_addr', n:'ç¾å±…åœ°å€'}, 
            {id:'c_tel', n:'ç¾å±…é›»è©±'}, {id:'live_status', n:'å±…ä½ç‹€æ³'}, {id:'comp_name', n:'å…¬å¸åç¨±'}, 
            {id:'comp_tel', n:'å…¬å¸é›»è©±'}, {id:'comp_addr', n:'å…¬å¸åœ°å€'}, {id:'job_title', n:'è·ç¨±'}, 
            {id:'income_status', n:'æ”¶å…¥å¹´è³‡'}, {id:'insurance', n:'å‹ä¿è–ªè½‰'}, {id:'r1_name', n:'è¯çµ¡1'}, 
            {id:'r1_tel', n:'è¯çµ¡1è³‡æ–™'}, {id:'r2_name', n:'è¯çµ¡2'}, {id:'r2_tel', n:'è¯çµ¡2è³‡æ–™'}
        ];

        for (let f of fields) {
            if (!document.getElementById(f.id).value) {
                alert("ã€Œ" + f.n + "ã€å°šæœªå¡«å¯«ï¼");
                document.getElementById(f.id).focus();
                return;
            }
        }

        // 2. ç¬¬ä¸€æ­¥ï¼šæç¤ºå³å°‡å‚³é€è³‡æ–™ä¸¦è¦æ±‚æ­¥é©ŸäºŒæ‹ç…§
        if (confirm("ç¬¬ä¸€æ­¥ï¼šåŸºæœ¬è³‡æ–™å¡«å¯«å®Œæˆã€‚\n\næ¥ä¸‹ä¾†é»æ“Šã€Œç¢ºå®šã€å¾Œï¼Œè«‹ä¾ç…§ç³»çµ±æç¤ºã€Œæ‹æ”èº«åˆ†è­‰æ­£åé¢ã€å®Œæˆç¬¬äºŒæ­¥ï¼")) {
            sendTextData();
        }
    }

    function sendTextData() {
        const d = (id) => document.getElementById(id).value;
        const msg = `ã€æ–°ä»¶æ­£å¼ç”³è«‹å–®ã€‘\nğŸ‘¤å§“åï¼š${d('name')}\nğŸ†”LINEï¼š${d('line_id')}\nğŸ‚ç”Ÿæ—¥ï¼š${d('birthday')}\nğŸªªèº«åˆ†è­‰ï¼š${d('id_num')}\nğŸ“å­¸æ­·ï¼š${d('edu')}\nğŸ“±æ‰‹æ©Ÿï¼š${d('mobile')}\nğŸ“æ™‚é–“ï¼š${d('contact_time')}\nğŸ“¡é›»ä¿¡ï¼š${d('telecom')}\nğŸ“§Emailï¼š${d('email')}\nğŸ æˆ¶ç±ï¼š${d('h_addr')}\nâ˜ï¸æˆ¶ç±é›»ï¼š${d('h_tel')}\nğŸ“ç¾å±…ï¼š${d('c_addr')}\nâ˜ï¸ç¾å±…é›»ï¼š${d('c_tel')}\nâ³å±…ä½ï¼š${d('live_status')}\nğŸ¢å…¬å¸ï¼š${d('comp_name')}\nâ˜ï¸å…¬è©±ï¼š${d('comp_tel')}\nğŸ“å…¬å€ï¼š${d('comp_addr')}\nğŸ’¼è·ç¨±ï¼š${d('job_title')}\nğŸ’°æ”¶å…¥ï¼š${d('income_status')}\nğŸ“å‹ä¿ï¼š${d('insurance')}\nğŸ‘¥è¯çµ¡1ï¼š${d('r1_name')}\nğŸ“è³‡æ–™1ï¼š${d('r1_tel')}\nğŸ‘¥è¯çµ¡2ï¼š${d('r2_name')}\nğŸ“è³‡æ–™2ï¼š${d('r2_tel')}\n\nâš ï¸è«‹æ³¨æ„ï¼šå®¢æˆ¶å³å°‡é€²è¡Œã€Œæ­¥é©Ÿ2ã€è­‰ä»¶æ‹æ”ã€‚`;

        liff.sendMessages([{ type: 'text', text: msg }]).then(() => {
            // 3. è§¸ç™¼æ­¥é©ŸäºŒï¼šå½ˆå‡ºæ‹ç…§å°è©±æ¡†
            alert("è³‡æ–™å·²å‚³é€ï¼\nè«‹æ¥è‘—é»æ“Šä¸‹æ–¹æŒ‰éˆ•æ‹æ”ã€Œèº«åˆ†è­‰æ­£é¢ã€");
            document.getElementById('photo_input').click(); 
            
            // ç›£è½æ‹ç…§å‹•ä½œ
            document.getElementById('photo_input').onchange = function() {
                alert("å·²æ¥æ”¶åˆ°ç…§ç‰‡ï¼è«‹ç¹¼çºŒæ‹æ”åé¢æˆ–ç›´æ¥è¯ç¹«å°ˆå“¡ã€‚");
                liff.closeWindow();
            };
        }).catch(err => alert("å‚³é€å¤±æ•—ï¼Œè«‹ç¢ºèª LINE æ¬Šé™"));
    }
</script>
</body>
</html>